(this["webpackJsonppeople-app"]=this["webpackJsonppeople-app"]||[]).push([[0],{106:function(e,s,t){},109:function(e,s,t){},209:function(e,s,t){},210:function(e,s,t){},229:function(e,s,t){"use strict";t.r(s);var a=t(2),c=t.n(a),n=t(43),r=t.n(n),i=t(17),l=(t(106),t(14)),o=t(23),d=t(90),j=t.n(d),b=t(1),m=Object(i.b)((function(e){return{loggedIn:e.auth.loggedIn,user:e.auth.user}}))((function(e){var s=e.loggedIn,t=e.user;return Object(b.jsx)("nav",{className:"navbar is-transparent ".concat(j.a.container),children:Object(b.jsxs)("div",{className:"container",children:[Object(b.jsxs)("div",{className:"navbar-brand",children:[Object(b.jsx)(l.b,{to:"/",className:"navbar-item is-logo",children:Object(b.jsx)("img",{src:"/logo.svg",alt:"People logo"})}),Object(b.jsxs)("div",{className:"navbar-burger","data-target":"navbarExampleTransparentExample",children:[Object(b.jsx)("span",{}),Object(b.jsx)("span",{}),Object(b.jsx)("span",{})]})]}),Object(b.jsx)("div",{id:"navbarExampleTransparentExample",className:"navbar-menu",children:Object(b.jsx)("div",{className:"navbar-end",children:s?Object(b.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(b.jsxs)("a",{className:"navbar-link",children:["Hi ","".concat(t.firstName," ").concat(t.lastName)]}),Object(b.jsxs)("div",{className:"navbar-dropdown is-right",children:[Object(b.jsx)(l.b,{className:"navbar-item",to:t.username,children:"Profile"}),Object(b.jsx)("a",{className:"navbar-item",children:"Setting"}),Object(b.jsx)("a",{className:"navbar-item",children:"Support"}),Object(b.jsx)("hr",{className:"navbar-divider"}),Object(b.jsx)("a",{className:"navbar-item",children:"Logout"})]})]}):Object(b.jsx)("div",{className:"navbar-item",children:Object(b.jsxs)("div",{className:"field is-grouped",children:[Object(b.jsx)("p",{className:"control",children:Object(b.jsxs)(l.b,{className:"bd-tw-button button",to:"/login",children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)(o.c,{})}),Object(b.jsx)("span",{children:"Login"})]})}),Object(b.jsx)("p",{className:"control",children:Object(b.jsxs)(l.b,{className:"button is-primary",to:"/register",children:[Object(b.jsx)("span",{className:"icon",children:Object(b.jsx)(o.a,{})}),Object(b.jsx)("span",{children:"Register"})]})})]})})})})]})})})),u=t(5),h=t(91),x=t.n(h),O=function(){return Object(b.jsx)("div",{className:x.a.container,children:"Home Page"})},p=t(9),f=t(19),g=t(46),v=Object(g.b)({name:"auth",initialState:{isLoading:!1,loadingUserData:!1,loggedIn:!1,error:null,user:null,accessToken:localStorage.getItem("access_token"),refreshToken:localStorage.getItem("refresh_token")},reducers:{login:function(e){e.isLoading=!0},loginSuccess:function(e,s){var t=s.payload,a=t.access_token,c=t.refresh_token;e.isLoading=!1,e.accessToken=a,e.refreshToken=c},loginFailed:function(e,s){e.isLoading=!1,e.error=s.payload},getUserInfo:function(e){e.loadingUserData=!0},getUserInfoSuccess:function(e,s){e.loadingUserData=!1,e.loggedIn=!0,e.user=s.payload},getUserInfoFailed:function(e,s){e.loadingUserData=!1,e.error=s.payload}}}),N=v.actions,_=N.login,w=N.loginSuccess,y=N.loginFailed,k=N.getUserInfo,S=N.getUserInfoSuccess,I=N.getUserInfoFailed,L=v.reducer,E={loginAction:_},T=Object(i.b)((function(e){return{isLoading:e.auth.isLoading}}),E)((function(e){var s=e.loginAction,t=e.isLoading,a=Object(f.d)(),c=a.register,n=a.handleSubmit,r=a.formState.errors;return Object(b.jsx)("div",{className:"login__container",children:Object(b.jsxs)("form",{className:"login__container__form box",onSubmit:n((function(e){var t=e.email,a=e.password;r.length||s({email:t,password:a})})),children:[Object(b.jsxs)("div",{className:"login__container__form__header",children:[Object(b.jsx)("span",{className:"is-size-3",children:"LOGIN"}),Object(b.jsx)("div",{className:"my-3"})]}),Object(b.jsxs)("div",{className:"login__container__form__content",children:[Object(b.jsx)("div",{className:"field my-4",children:Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("input",Object(p.a)(Object(p.a)({className:"input ".concat(r.email&&"is-danger"),type:"text"},c("email",{required:!0})),{},{placeholder:"Username"}))})}),Object(b.jsx)("div",{className:"field mt-4",children:Object(b.jsx)("div",{className:"control",children:Object(b.jsx)("input",Object(p.a)(Object(p.a)({className:"input ".concat(r.password&&"is-danger"),type:"password"},c("password",{required:!0,minLength:8,maxLength:60})),{},{placeholder:"Password"}))})}),Object(b.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-5",children:[Object(b.jsxs)("label",{className:"checkbox is-flex is-align-items-center",children:[Object(b.jsx)("input",{type:"checkbox"}),"\xa0Remember me"]}),Object(b.jsx)(l.b,{to:"/forgot",className:"is-info",children:"Forgot"})]})]}),Object(b.jsx)("div",{className:"login__container__form__footer",children:Object(b.jsx)("button",{type:"submit",className:"button is-primary is-fullwidth is-medium is-info ".concat(t&&"is-loading"),children:"Sign in"})})]})})})),U=(t(109),T),P=t(10),q=function(){var e=Object(a.useState)(!1),s=Object(P.a)(e,2),t=s[0],c=s[1],n=Object(f.d)(),r=n.register,i=n.handleSubmit,l=n.reset,d=n.formState.errors;return Object(a.useEffect)((function(){setTimeout((function(){l({email:"",username:"",password:""}),c(!1)}),1500)}),[l,t]),Object(b.jsx)("div",{className:"columns is-centered",children:Object(b.jsx)("div",{className:"is-vertically-centered column is-5",children:Object(b.jsx)("div",{className:"container interactive is-flex-direction-column is-justify-content-center is-flex p-6 mt-6 box",children:Object(b.jsxs)("form",{onSubmit:i((function(e){c(!0),alert(JSON.stringify(e))})),children:[Object(b.jsxs)("div",{className:"field",children:[Object(b.jsxs)("label",{className:"label",children:["Email ",Object(b.jsx)("span",{className:"has-text-danger-dark",children:"*"})]}),Object(b.jsxs)("div",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(p.a)({className:"input",type:"text",placeholder:"Email",name:"email"},r("email",{required:!0,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}}))),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)(o.d,{})}),d.email&&"required"===d.email.type&&Object(b.jsx)("span",{className:"has-text-danger-dark",children:"This is required"}),d.email&&"pattern"===d.email.type&&Object(b.jsx)("span",{className:"has-text-danger-dark",children:"Invalid email address"})]})]}),Object(b.jsxs)("div",{className:"field",children:[Object(b.jsxs)("label",{className:"label",children:["Username ",Object(b.jsx)("span",{className:"has-text-danger-dark",children:"*"})]}),Object(b.jsxs)("div",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(p.a)({className:"input",type:"text",placeholder:"Username",name:"username"},r("username",{required:!0,minLength:5,maxLength:20}))),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)(o.e,{})}),d.username&&"required"===d.username.type&&Object(b.jsx)("span",{className:"has-text-danger-dark",children:"This is required"}),d.username&&"minLength"===d.username.type&&Object(b.jsx)("span",{className:"has-text-danger-dark",children:"Min length exceeded"}),d.username&&"maxLength"===d.username.type&&Object(b.jsx)("span",{className:"has-text-danger-dark",children:"Max length exceeded"})]})]}),Object(b.jsxs)("div",{className:"field",children:[Object(b.jsxs)("label",{className:"label",children:["Password ",Object(b.jsx)("span",{className:"has-text-danger-dark",children:"*"})]}),Object(b.jsxs)("div",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(p.a)({className:"input",type:"password",placeholder:"Password",name:"password"},r("password",{required:!0}))),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)(o.b,{})})]}),d.password&&"required"===d.password.type&&Object(b.jsx)("span",{className:"has-text-danger-dark",children:"This is required"})]}),Object(b.jsx)("div",{className:"buttons",children:Object(b.jsx)("button",{className:"is-primary is-rounded is-fullwidth button ".concat(t?"is-loading":""),tabIndex:"0",type:"submit",children:"Register"})})]})})})})},C=t(27),D=t(98),A=function(e){return Object(f.d)({resolver:Object(D.a)(e)})},F=C.a({email:C.c().email().required()}).required(),R=function(){var e=A(F),s=e.register,t=e.handleSubmit,a=e.formState.errors;return Object(b.jsx)("div",{className:"ForgotPassword__Container",children:Object(b.jsx)("div",{className:"columns is-centered",children:Object(b.jsx)("div",{className:"is-vertically-centered column is-5",children:Object(b.jsxs)("div",{className:"container interactive is-flex-direction-column is-justify-content-center is-flex p-6 mt-6 box",children:[Object(b.jsx)("h1",{className:"title is-4 is-horizontaly-centered",children:"Forgot password"}),Object(b.jsxs)("form",{onSubmit:t((function(e){console.log(e)})),children:[Object(b.jsxs)("div",{className:"field",children:[Object(b.jsx)("label",{className:"label",children:"Enter your email"}),Object(b.jsxs)("div",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(p.a)({className:"input ".concat(a.email?"is-danger":""),placeholder:"Email"},s("email"))),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)(o.d,{})})]}),a.email&&Object(b.jsx)("p",{className:"help is-danger",children:a.email.message})]}),Object(b.jsx)("div",{className:"field",children:Object(b.jsx)("button",{type:"submit",className:"is-primary is-rounded is-fullwidth button",children:"Send email to reset password"})})]})]})})})})},z=t(57),B=C.a({password:C.c().required("Password is required"),passwordConfirmation:C.c().oneOf([C.b("password"),null],"Passwords must match")}).required();var G=function(){var e=A(B),s=e.register,t=e.handleSubmit,a=e.formState.errors,n=c.a.useState(!1),r=Object(P.a)(n,2),i=r[0],l=r[1],o=new URLSearchParams(Object(u.f)().search),d=function(e){console.log(e),l(!0)};return Object(b.jsx)("div",{className:"resetPassword__container",children:Object(b.jsxs)("form",{className:"resetPassword__container__form box",onKeyDown:function(e){"Enter"===e.key&&t(d)},children:[Object(b.jsxs)("div",{className:"resetPassword__container__form__header",children:[Object(b.jsx)("span",{className:"is-size-3",children:"LOGIN"}),Object(b.jsx)("div",{className:"my-3"})]}),Object(b.jsxs)("div",{className:"resetPassword__container__form__content",children:[Object(b.jsx)("input",Object(p.a)(Object(p.a)({type:"hidden"},s("token")),{},{defaultValue:o.get("token")})),Object(b.jsxs)("div",{className:"field my-4",children:[Object(b.jsx)("label",{className:"label",children:"Enter your email"}),Object(b.jsxs)("div",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(p.a)(Object(p.a)({className:"input ".concat(a.password&&"is-danger"),type:"password"},s("password")),{},{placeholder:""})),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)(z.a,{})})]}),a.password&&Object(b.jsx)("p",{className:"help is-danger",children:a.password.message})]}),Object(b.jsxs)("div",{className:"field mt-4",children:[Object(b.jsxs)("div",{className:"control has-icons-left",children:[Object(b.jsx)("input",Object(p.a)(Object(p.a)({className:"input ".concat(a.passwordConfirmation&&"is-danger"),type:"password"},s("passwordConfirmation")),{},{placeholder:""})),Object(b.jsx)("span",{className:"icon is-left",children:Object(b.jsx)(z.a,{})})]}),a.passwordConfirmation&&Object(b.jsx)("p",{className:"help is-danger",children:a.passwordConfirmation.message})]})]}),Object(b.jsx)("div",{className:"resetPassword__container__form__footer mt-5",children:Object(b.jsx)("button",{className:"button is-primary is-fullwidth is-medium is-info ".concat(i&&"is-loading"),onClick:t(d),children:"Sign in"})})]})})},H=(t(209),G),M=function(){return Object(b.jsxs)(u.d,{children:[Object(b.jsx)(u.b,{path:"/register",children:Object(b.jsx)(q,{})}),Object(b.jsx)(u.b,{path:"/password/forgot",children:Object(b.jsx)(R,{})}),Object(b.jsx)(u.b,{path:"/password/reset",children:Object(b.jsx)(H,{})}),Object(b.jsx)(u.b,{path:"/login",children:Object(b.jsx)(U,{})}),Object(b.jsx)(u.b,{path:"/",children:Object(b.jsx)(O,{})})]})},V=function(){return Object(b.jsx)("figure",{className:"image is-128x128",children:Object(b.jsx)("img",{className:"is-rounded",src:"https://bulma.io/images/placeholders/128x128.png"})})},X=t(95),J=["children","to","activeClass"],K=function(e){var s=e.children,t=e.to,a=e.activeClass,c=Object(X.a)(e,J),n=Object(u.j)(t),r=Object(u.g)({path:n.pathname,end:!0});return Object(b.jsx)(l.b,Object(p.a)(Object(p.a)({className:r?a:"",to:t},c),{},{children:s}))};K.defaultProps={activeClass:""};var Z=K,$=function(){return Object(b.jsxs)("section",{className:"section pl-0 pr-0",children:[Object(b.jsx)("div",{className:"tabs",children:Object(b.jsxs)("ul",{children:[Object(b.jsx)("li",{children:Object(b.jsx)(Z,{to:"posts",activeClass:"is-active",children:"POSTS"})}),Object(b.jsx)("li",{children:Object(b.jsx)(Z,{to:"saved",activeClass:"is-active",children:"SAVED"})}),Object(b.jsx)("li",{children:Object(b.jsx)(Z,{to:"tagged",activeClass:"is-active",children:"TAGGED"})})]})}),Object(b.jsx)(u.a,{})]})},Q=(t(210),$),W=Object(i.b)((function(e){return{user:e.auth.user}}))((function(e){var s=e.user,t=Object(u.i)().username,a=s.username===t?s:{};return Object(b.jsxs)("div",{className:"container",children:[Object(b.jsx)("section",{className:"hero mt-4",children:Object(b.jsxs)("div",{className:"columns",children:[Object(b.jsx)("div",{className:"column is-2",children:Object(b.jsx)(V,{})}),Object(b.jsxs)("div",{className:"column is-flex is-flex-direction-column is-justify-content-center",children:[Object(b.jsxs)("p",{className:"title",children:[a.firstName," ",a.lastName]}),Object(b.jsxs)("p",{className:"subtitle",children:["@",a.username]})]})]})}),Object(b.jsx)(Q,{})]})})),Y=function(e){var s=e.user;return Object(b.jsxs)("article",{className:"media",children:[Object(b.jsx)("figure",{className:"media-left",children:Object(b.jsx)("p",{className:"image is-64x64",children:Object(b.jsx)("img",{className:"is-rounded",src:"https://bulma.io/images/placeholders/128x128.png"})})}),Object(b.jsxs)("div",{className:"media-content",children:[Object(b.jsx)("div",{className:"content",children:Object(b.jsxs)("p",{children:[Object(b.jsxs)("strong",{children:[null===s||void 0===s?void 0:s.firstName," ",null===s||void 0===s?void 0:s.lastName]})," ",Object(b.jsxs)("small",{children:["@",null===s||void 0===s?void 0:s.username]})," ",Object(b.jsx)("small",{children:"31m"}),Object(b.jsx)("br",{}),"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Proin ornare magna eros, eu pellentesque tortor vestibulum ut. Maecenas non massa sem. Etiam finibus odio quis feugiat facilisis."]})}),Object(b.jsx)("nav",{className:"level is-mobile",children:Object(b.jsxs)("div",{className:"level-left",children:[Object(b.jsx)("a",{className:"level-item",children:Object(b.jsx)("span",{className:"icon is-small",children:Object(b.jsx)("i",{className:"fas fa-reply"})})}),Object(b.jsx)("a",{className:"level-item",children:Object(b.jsx)("span",{className:"icon is-small",children:Object(b.jsx)("i",{className:"fas fa-retweet"})})}),Object(b.jsx)("a",{className:"level-item",children:Object(b.jsx)("span",{className:"icon is-small",children:Object(b.jsx)("i",{className:"fas fa-heart"})})})]})})]})]})},ee=Object(i.b)((function(e){return{user:e.auth.user}}))((function(e){var s=e.user,t=Array(15).fill(s);return Object(b.jsxs)("div",{className:"columns",children:[Object(b.jsx)("div",{className:"column is-8",children:t.map((function(e,t){return Object(b.jsx)("div",{children:Object(b.jsx)(Y,{user:e})},s.id+t)}))}),Object(b.jsx)("div",{className:"column is-4",children:"Right"})]})})),se=function(){return Object(b.jsx)("div",{children:"Saved list"})},te=function(){return Object(b.jsx)("div",{children:"Tagged list"})},ae=function(){return Object(b.jsxs)(u.d,{path:"/",children:[Object(b.jsx)(u.b,{index:!0,element:Object(b.jsx)(O,{})}),Object(b.jsxs)(u.b,{path:"/:username",element:Object(b.jsx)(W,{}),children:[Object(b.jsx)(u.b,{path:"posts",element:Object(b.jsx)(ee,{})}),Object(b.jsx)(u.b,{path:"saved",element:Object(b.jsx)(se,{})}),Object(b.jsx)(u.b,{path:"tagged",element:Object(b.jsx)(te,{})})]})]})};var ce=Object(i.b)((function(e){return{loggedIn:e.auth.loggedIn,isLoading:e.auth.loadingUserData}}))((function(e){var s=e.loggedIn;return e.isLoading?Object(b.jsx)("div",{className:"fullscreen__loading",children:"Loading"}):Object(b.jsxs)(l.a,{children:[Object(b.jsx)("div",{children:Object(b.jsx)(m,{})}),Object(b.jsx)("div",{className:"app-content",children:s?Object(b.jsx)(ae,{}):Object(b.jsx)(M,{})})]})})),ne=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,231)).then((function(s){var t=s.getCLS,a=s.getFID,c=s.getFCP,n=s.getLCP,r=s.getTTFB;t(e),a(e),c(e),n(e),r(e)}))},re=t(97),ie=t(6),le=t.n(ie),oe=t(58),de=t(21),je=t(15),be=t(96),me=t.n(be),ue={development:{apiUrl:"http://cc220e9dfab7.sn.mynetname.net:9000/",apiEndpoint:"",basicAuthUser:{username:"people-user",password:"people-secret"}}},he=function(e){if(!ue[e])throw new Error('Environment name "'.concat(e,'" is not define.'));return ue[e]},xe=he("development"),Oe=me.a.create({baseURL:xe.apiUrl+xe.apiEndpoint,headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"}});Oe.interceptors.request.use(function(){var e=Object(je.a)(le.a.mark((function e(s){var t;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=localStorage.getItem("access_token"))&&(s.headers.Authorization="Bearer "+t),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()),Oe.interceptors.response.use(function(){var e=Object(je.a)(le.a.mark((function e(s){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.data);case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),function(){var e=Object(je.a)(le.a.mark((function e(s){var t,a,c,n,r;return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.config,console.warn("Error status",s.response.status),403!==s.response.status||t._retry){e.next=14;break}return t._retry=!0,a=localStorage.getItem("refresh_token"),e.next=7,i=a,Oe.post("/auth/refresh-token",{refreshToken:i});case 7:return c=e.sent,n=c.access_token,r=c.refresh_token,localStorage.setItem("access_token",n),localStorage.setItem("refresh_token",r),t.headers.Authorization="Bearer "+n,e.abrupt("return",Oe(t));case 14:return e.abrupt("return",Promise.reject(s));case 15:case"end":return e.stop()}var i}),e)})));return function(s){return e.apply(this,arguments)}}());var pe=Oe,fe=function(){return pe.get("users/info")},ge=le.a.mark(ve);function ve(){var e;return le.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(de.a)(fe);case 3:return e=s.sent,s.next=6,Object(de.c)(S(e.data));case 6:s.next=12;break;case 8:return s.prev=8,s.t0=s.catch(0),s.next=12,Object(de.c)(I(s.t0));case 12:case"end":return s.stop()}}),ge,null,[[0,8]])}var Ne=ve,_e={grantType:"password",username:"",password:"",clientId:"people-auth-client",clientSecret:"3cc6b641-b64d-4d12-bace-d15b194ef58a"},we=function(e){var s=function(e,s){return Object(p.a)(Object(p.a)({},_e),{},{username:e,password:s})}(e.email,e.password);return pe.post("auth/login",s)},ye=le.a.mark(ke);function ke(e){var s,t,a,c;return le.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("Login: ",e),n.prev=1,s=e.payload,t=s.email,a=s.password,n.next=5,Object(de.a)(we,{email:t,password:a});case 5:return c=n.sent,localStorage.setItem("access_token",c.access_token),localStorage.setItem("refresh_token",c.refresh_token),n.next=10,Object(de.c)(w(c));case 10:return n.next=12,Object(de.b)(Ne);case 12:n.next=19;break;case 14:return n.prev=14,n.t0=n.catch(1),console.log("Login failed: ",n.t0),n.next=19,Object(de.c)(y(n.t0));case 19:case"end":return n.stop()}}),ye,null,[[1,14]])}var Se=ke,Ie=le.a.mark(Le);function Le(){return le.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)("auth/login",Se);case 2:return e.next=4,Object(oe.a)("auth/getUserInfo",Ne);case 4:case"end":return e.stop()}}),Ie)}var Ee=Le,Te=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),Ue=function(){var e=Object(re.a)(),s=Object(g.a)({reducer:{auth:L},middleware:[e]},Te);return e.run(Ee),s.dispatch(k()),s}();r.a.render(Object(b.jsx)(c.a.StrictMode,{children:Object(b.jsx)(i.a,{store:Ue,children:Object(b.jsx)(ce,{})})}),document.getElementById("root")),ne()},90:function(e,s,t){e.exports={container:"Navbar_container__Stw5O"}},91:function(e,s,t){e.exports={container:"Home_container__3HKK4"}}},[[229,1,2]]]);
//# sourceMappingURL=main.49ba79e4.chunk.js.map