(this["webpackJsonppeople-app"]=this["webpackJsonppeople-app"]||[]).push([[0],{113:function(e,s,a){},121:function(e,s,a){},220:function(e,s,a){},239:function(e,s,a){"use strict";a.r(s);var t=a(2),n=a.n(t),r=a(48),c=a.n(r),i=a(28),o=(a(113),a(21)),l=a(10),d=a(97),j=a.n(d),b=a(24),m=a(1),u=Object(i.b)((function(e){return{loggedIn:e.auth.loggedIn,user:e.auth.user}}))((function(e){var s=e.loggedIn,a=e.user;return Object(m.jsxs)("nav",{className:"navbar is-transparent ".concat(j.a.container),children:[Object(m.jsxs)("div",{className:"navbar-brand",children:[Object(m.jsx)(o.b,{to:"/",className:"navbar-item is-logo",children:Object(m.jsx)("img",{src:"/logo.svg",alt:"People logo"})}),Object(m.jsxs)("div",{className:"navbar-burger","data-target":"navbarExampleTransparentExample",children:[Object(m.jsx)("span",{}),Object(m.jsx)("span",{}),Object(m.jsx)("span",{})]})]}),Object(m.jsx)("div",{id:"navbarExampleTransparentExample",className:"navbar-menu",children:Object(m.jsx)("div",{className:"navbar-end",children:s?Object(m.jsxs)("div",{className:"navbar-item has-dropdown is-hoverable",children:[Object(m.jsxs)("a",{className:"navbar-link",children:["Hi ","".concat(a.firstName," ").concat(a.lastName)]}),Object(m.jsxs)("div",{className:"navbar-dropdown is-right",children:[Object(m.jsx)("a",{className:"navbar-item",children:"Profile"}),Object(m.jsx)("a",{className:"navbar-item",children:"Setting"}),Object(m.jsx)("a",{className:"navbar-item",children:"Support"}),Object(m.jsx)("hr",{className:"navbar-divider"}),Object(m.jsx)("a",{className:"navbar-item",children:"Logout"})]})]}):Object(m.jsx)("div",{className:"navbar-item",children:Object(m.jsxs)("div",{className:"field is-grouped",children:[Object(m.jsx)("p",{className:"control",children:Object(m.jsxs)(o.b,{className:"bd-tw-button button",to:"/login",children:[Object(m.jsx)("span",{className:"icon",children:Object(m.jsx)(b.c,{})}),Object(m.jsx)("span",{children:"Login"})]})}),Object(m.jsx)("p",{className:"control",children:Object(m.jsxs)(o.b,{className:"button is-primary",to:"/register",children:[Object(m.jsx)("span",{className:"icon",children:Object(m.jsx)(b.a,{})}),Object(m.jsx)("span",{children:"Register"})]})})]})})})})]})})),h=a(99),p=a.n(h),x=function(){return Object(m.jsx)("div",{className:p.a.container,children:"Home Page"})},O=a(9),f=a(20),g=a(51),v=Object(g.b)({name:"auth",initialState:{isLoading:!1,loadingUserData:!1,loggedIn:!1,error:null,user:null,accessToken:localStorage.getItem("access_token"),refreshToken:localStorage.getItem("refresh_token")},reducers:{login:function(e){e.isLoading=!0},loginSuccess:function(e,s){var a=s.payload,t=a.access_token,n=a.refresh_token;e.isLoading=!1,e.accessToken=t,e.refreshToken=n},loginFailed:function(e,s){e.isLoading=!1,e.error=s.payload},getUserInfo:function(e){e.loadingUserData=!0},getUserInfoSuccess:function(e,s){e.loadingUserData=!1,e.loggedIn=!0,e.user=s.payload},getUserInfoFailed:function(e,s){e.loadingUserData=!1,e.error=s.payload}}}),N=v.actions,_=N.login,w=N.loginSuccess,y=N.loginFailed,k=N.getUserInfo,S=N.getUserInfoSuccess,I=N.getUserInfoFailed,L=v.reducer,E={loginAction:_},U=Object(i.b)((function(e){return{isLoading:e.auth.isLoading}}),E)((function(e){var s=e.loginAction,a=e.isLoading,t=Object(f.d)(),n=t.register,r=t.handleSubmit,c=t.formState.errors;return Object(m.jsx)("div",{className:"login__container",children:Object(m.jsxs)("form",{className:"login__container__form box",onSubmit:r((function(e){var a=e.email,t=e.password;c.length||s({email:a,password:t})})),children:[Object(m.jsxs)("div",{className:"login__container__form__header",children:[Object(m.jsx)("span",{className:"is-size-3",children:"LOGIN"}),Object(m.jsx)("div",{className:"my-3"})]}),Object(m.jsxs)("div",{className:"login__container__form__content",children:[Object(m.jsx)("div",{className:"field my-4",children:Object(m.jsx)("div",{className:"control",children:Object(m.jsx)("input",Object(O.a)(Object(O.a)({className:"input ".concat(c.email&&"is-danger"),type:"text"},n("email",{required:!0})),{},{placeholder:"Username"}))})}),Object(m.jsx)("div",{className:"field mt-4",children:Object(m.jsx)("div",{className:"control",children:Object(m.jsx)("input",Object(O.a)(Object(O.a)({className:"input ".concat(c.password&&"is-danger"),type:"password"},n("password",{required:!0,minLength:8,maxLength:60})),{},{placeholder:"Password"}))})}),Object(m.jsxs)("div",{className:"is-flex is-justify-content-space-between mb-5",children:[Object(m.jsxs)("label",{className:"checkbox is-flex is-align-items-center",children:[Object(m.jsx)("input",{type:"checkbox"}),"\xa0Remember me"]}),Object(m.jsx)(o.b,{to:"/forgot",className:"is-info",children:"Forgot"})]})]}),Object(m.jsx)("div",{className:"login__container__form__footer",children:Object(m.jsx)("button",{type:"submit",className:"button is-primary is-fullwidth is-medium is-info ".concat(a&&"is-loading"),children:"Sign in"})})]})})})),T=(a(121),U),P=a(12),q=function(){var e=Object(t.useState)(!1),s=Object(P.a)(e,2),a=s[0],n=s[1],r=Object(f.d)(),c=r.register,i=r.handleSubmit,o=r.reset,l=r.formState.errors;return Object(t.useEffect)((function(){setTimeout((function(){o({email:"",username:"",password:""}),n(!1)}),1500)}),[o,a]),Object(m.jsx)("div",{className:"columns is-centered",children:Object(m.jsx)("div",{className:"is-vertically-centered column is-5",children:Object(m.jsx)("div",{className:"container interactive is-flex-direction-column is-justify-content-center is-flex p-6 mt-6 box",children:Object(m.jsxs)("form",{onSubmit:i((function(e){n(!0),alert(JSON.stringify(e))})),children:[Object(m.jsxs)("div",{className:"field",children:[Object(m.jsxs)("label",{className:"label",children:["Email ",Object(m.jsx)("span",{className:"has-text-danger-dark",children:"*"})]}),Object(m.jsxs)("div",{className:"control has-icons-left",children:[Object(m.jsx)("input",Object(O.a)({className:"input",type:"text",placeholder:"Email",name:"email"},c("email",{required:!0,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i}}))),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)(b.d,{})}),l.email&&"required"===l.email.type&&Object(m.jsx)("span",{className:"has-text-danger-dark",children:"This is required"}),l.email&&"pattern"===l.email.type&&Object(m.jsx)("span",{className:"has-text-danger-dark",children:"Invalid email address"})]})]}),Object(m.jsxs)("div",{className:"field",children:[Object(m.jsxs)("label",{className:"label",children:["Username ",Object(m.jsx)("span",{className:"has-text-danger-dark",children:"*"})]}),Object(m.jsxs)("div",{className:"control has-icons-left",children:[Object(m.jsx)("input",Object(O.a)({className:"input",type:"text",placeholder:"Username",name:"username"},c("username",{required:!0,minLength:5,maxLength:20}))),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)(b.e,{})}),l.username&&"required"===l.username.type&&Object(m.jsx)("span",{className:"has-text-danger-dark",children:"This is required"}),l.username&&"minLength"===l.username.type&&Object(m.jsx)("span",{className:"has-text-danger-dark",children:"Min length exceeded"}),l.username&&"maxLength"===l.username.type&&Object(m.jsx)("span",{className:"has-text-danger-dark",children:"Max length exceeded"})]})]}),Object(m.jsxs)("div",{className:"field",children:[Object(m.jsxs)("label",{className:"label",children:["Password ",Object(m.jsx)("span",{className:"has-text-danger-dark",children:"*"})]}),Object(m.jsxs)("div",{className:"control has-icons-left",children:[Object(m.jsx)("input",Object(O.a)({className:"input",type:"password",placeholder:"Password",name:"password"},c("password",{required:!0}))),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)(b.b,{})})]}),l.password&&"required"===l.password.type&&Object(m.jsx)("span",{className:"has-text-danger-dark",children:"This is required"})]}),Object(m.jsx)("div",{className:"buttons",children:Object(m.jsx)("button",{className:"is-primary is-rounded is-fullwidth button ".concat(a?"is-loading":""),tabIndex:"0",type:"submit",children:"Register"})})]})})})})},C=a(30),F=a(105),D=function(e){return Object(f.d)({resolver:Object(F.a)(e)})},A=C.a({email:C.c().email().required()}).required(),R=function(){var e=D(A),s=e.register,a=e.handleSubmit,t=e.formState.errors;return Object(m.jsx)("div",{className:"ForgotPassword__Container",children:Object(m.jsx)("div",{className:"columns is-centered",children:Object(m.jsx)("div",{className:"is-vertically-centered column is-5",children:Object(m.jsxs)("div",{className:"container interactive is-flex-direction-column is-justify-content-center is-flex p-6 mt-6 box",children:[Object(m.jsx)("h1",{className:"title is-4 is-horizontaly-centered",children:"Forgot password"}),Object(m.jsxs)("form",{onSubmit:a((function(e){console.log(e)})),children:[Object(m.jsxs)("div",{className:"field",children:[Object(m.jsx)("label",{className:"label",children:"Enter your email"}),Object(m.jsxs)("div",{className:"control has-icons-left",children:[Object(m.jsx)("input",Object(O.a)({className:"input ".concat(t.email?"is-danger":""),placeholder:"Email"},s("email"))),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)(b.d,{})})]}),t.email&&Object(m.jsx)("p",{className:"help is-danger",children:t.email.message})]}),Object(m.jsx)("div",{className:"field",children:Object(m.jsx)("button",{type:"submit",className:"is-primary is-rounded is-fullwidth button",children:"Send email to reset password"})})]})]})})})})},z=a(63),B=C.a({password:C.c().required("Password is required"),passwordConfirmation:C.c().oneOf([C.b("password"),null],"Passwords must match")}).required();var H=function(){var e=D(B),s=e.register,a=e.handleSubmit,t=e.formState.errors,r=n.a.useState(!1),c=Object(P.a)(r,2),i=c[0],o=c[1],d=new URLSearchParams(Object(l.f)().search),j=function(e){console.log(e),o(!0)};return Object(m.jsx)("div",{className:"resetPassword__container",children:Object(m.jsxs)("form",{className:"resetPassword__container__form box",onKeyDown:function(e){"Enter"===e.key&&a(j)},children:[Object(m.jsxs)("div",{className:"resetPassword__container__form__header",children:[Object(m.jsx)("span",{className:"is-size-3",children:"LOGIN"}),Object(m.jsx)("div",{className:"my-3"})]}),Object(m.jsxs)("div",{className:"resetPassword__container__form__content",children:[Object(m.jsx)("input",Object(O.a)(Object(O.a)({type:"hidden"},s("token")),{},{defaultValue:d.get("token")})),Object(m.jsxs)("div",{className:"field my-4",children:[Object(m.jsx)("label",{className:"label",children:"Enter your email"}),Object(m.jsxs)("div",{className:"control has-icons-left",children:[Object(m.jsx)("input",Object(O.a)(Object(O.a)({className:"input ".concat(t.password&&"is-danger"),type:"password"},s("password")),{},{placeholder:""})),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)(z.a,{})})]}),t.password&&Object(m.jsx)("p",{className:"help is-danger",children:t.password.message})]}),Object(m.jsxs)("div",{className:"field mt-4",children:[Object(m.jsxs)("div",{className:"control has-icons-left",children:[Object(m.jsx)("input",Object(O.a)(Object(O.a)({className:"input ".concat(t.passwordConfirmation&&"is-danger"),type:"password"},s("passwordConfirmation")),{},{placeholder:""})),Object(m.jsx)("span",{className:"icon is-left",children:Object(m.jsx)(z.a,{})})]}),t.passwordConfirmation&&Object(m.jsx)("p",{className:"help is-danger",children:t.passwordConfirmation.message})]})]}),Object(m.jsx)("div",{className:"resetPassword__container__form__footer mt-5",children:Object(m.jsx)("button",{className:"button is-primary is-fullwidth is-medium is-info ".concat(i&&"is-loading"),onClick:a(j),children:"Sign in"})})]})})},X=(a(220),H),J=function(){return Object(m.jsxs)(l.c,{children:[Object(m.jsx)(l.a,{path:"/register",children:Object(m.jsx)(q,{})}),Object(m.jsx)(l.a,{path:"/password/forgot",children:Object(m.jsx)(R,{})}),Object(m.jsx)(l.a,{path:"/password/reset",children:Object(m.jsx)(X,{})}),Object(m.jsx)(l.a,{path:"/login",children:Object(m.jsx)(T,{})}),Object(m.jsx)(l.a,{path:"/",children:Object(m.jsx)(x,{})})]})},K=function(){return Object(m.jsx)(m.Fragment,{children:Object(m.jsx)(l.a,{path:"/",children:Object(m.jsx)(x,{})})})};var M=Object(i.b)((function(e){return{loggedIn:e.auth.loggedIn,isLoading:e.auth.loadingUserData}}))((function(e){var s=e.loggedIn;return e.isLoading?Object(m.jsx)("div",{className:"fullscreen__loading",children:"Loading"}):Object(m.jsxs)(o.a,{children:[Object(m.jsx)("div",{children:Object(m.jsx)(u,{})}),Object(m.jsx)("div",{children:Object(m.jsx)(l.c,{children:s?Object(m.jsx)(K,{}):Object(m.jsx)(J,{})})})]})})),V=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,240)).then((function(s){var a=s.getCLS,t=s.getFID,n=s.getFCP,r=s.getLCP,c=s.getTTFB;a(e),t(e),n(e),r(e),c(e)}))},Z=a(104),G=a(5),$=a.n(G),Q=a(64),W=a(22),Y=a(14),ee=a(103),se=a.n(ee),ae={development:{apiUrl:"http://cc220e9dfab7.sn.mynetname.net:9000/",apiEndpoint:"",basicAuthUser:{username:"people-user",password:"people-secret"}}},te=function(e){if(!ae[e])throw new Error('Environment name "'.concat(e,'" is not define.'));return ae[e]},ne=te("development"),re=se.a.create({baseURL:ne.apiUrl+ne.apiEndpoint,headers:{Accept:"application/json","Content-Type":"application/json","Cache-Control":"no-cache"}});re.interceptors.request.use(function(){var e=Object(Y.a)($.a.mark((function e(s){var a;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=localStorage.getItem("access_token"))&&(s.headers.Authorization="Bearer "+a),e.abrupt("return",s);case 3:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()),re.interceptors.response.use(function(){var e=Object(Y.a)($.a.mark((function e(s){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",s.data);case 1:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}(),function(){var e=Object(Y.a)($.a.mark((function e(s){var a,t,n,r,c;return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=s.config,console.warn("Error status",s.response.status),403!==s.response.status||a._retry){e.next=14;break}return a._retry=!0,t=localStorage.getItem("refresh_token"),e.next=7,i=t,re.post("/auth/refresh-token",{refreshToken:i});case 7:return n=e.sent,r=n.access_token,c=n.refresh_token,localStorage.setItem("access_token",r),localStorage.setItem("refresh_token",c),a.headers.Authorization="Bearer "+r,e.abrupt("return",re(a));case 14:return e.abrupt("return",Promise.reject(s));case 15:case"end":return e.stop()}var i}),e)})));return function(s){return e.apply(this,arguments)}}());var ce=re,ie=function(){return ce.get("users/info")},oe=$.a.mark(le);function le(){var e;return $.a.wrap((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,s.next=3,Object(W.a)(ie);case 3:return e=s.sent,s.next=6,Object(W.c)(S(e.data));case 6:s.next=12;break;case 8:return s.prev=8,s.t0=s.catch(0),s.next=12,Object(W.c)(I(s.t0));case 12:case"end":return s.stop()}}),oe,null,[[0,8]])}var de=le,je={grantType:"password",username:"",password:"",clientId:"people-auth-client",clientSecret:"3cc6b641-b64d-4d12-bace-d15b194ef58a"},be=function(e){var s=function(e,s){return Object(O.a)(Object(O.a)({},je),{},{username:e,password:s})}(e.email,e.password);return ce.post("auth/login",s)},me=$.a.mark(ue);function ue(e){var s,a,t,n;return $.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return console.log("Login: ",e),r.prev=1,s=e.payload,a=s.email,t=s.password,r.next=5,Object(W.a)(be,{email:a,password:t});case 5:return n=r.sent,localStorage.setItem("access_token",n.access_token),localStorage.setItem("refresh_token",n.refresh_token),r.next=10,Object(W.c)(w(n));case 10:return r.next=12,Object(W.b)(de);case 12:r.next=19;break;case 14:return r.prev=14,r.t0=r.catch(1),console.log("Login failed: ",r.t0),r.next=19,Object(W.c)(y(r.t0));case 19:case"end":return r.stop()}}),me,null,[[1,14]])}var he=ue,pe=$.a.mark(xe);function xe(){return $.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.a)("auth/login",he);case 2:return e.next=4,Object(Q.a)("auth/getUserInfo",de);case 4:case"end":return e.stop()}}),pe)}var Oe=xe,fe=window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__(),ge=function(){var e=Object(Z.a)(),s=Object(g.a)({reducer:{auth:L},middleware:[e]},fe);return e.run(Oe),s.dispatch(k()),s}();c.a.render(Object(m.jsx)(n.a.StrictMode,{children:Object(m.jsx)(i.a,{store:ge,children:Object(m.jsx)(M,{})})}),document.getElementById("root")),V()},97:function(e,s,a){e.exports={container:"Navbar_container__Stw5O"}},99:function(e,s,a){e.exports={container:"Home_container__3HKK4"}}},[[239,1,2]]]);
//# sourceMappingURL=main.19c60a99.chunk.js.map